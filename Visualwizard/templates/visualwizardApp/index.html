{% load static %}
<!DOCTYPE html>
<html>
<head>
  <script src="{% static 'js/chatbot.js' %}"></script>
</head>
<body>
  <h1>Image Enhancement</h1>
  {% if original_image_url %}
  <h2>Original Image</h2>
  <img src="{{ original_image_url }}" alt="Original Image">
  {% endif %}
  {% if enhanced_image_url %}
  <h2>Enhanced Image</h2>
  <img src="{{ enhanced_image_url }}" alt="Enhanced Image">
  {% endif %}

  <!-- <form action="" method="POST" enctype="multipart/form-data">
    {% csrf_token %}  # Include CSRF token for security
    <label for="original_image">Upload Image:</label>
    <input type="file" name="original_image" id="original_image">
    <br>
    <label for="enhancement_type">Enhancement Type:</label>
    <select name="enhancement_type" id="enhancement_type">
      <option value="brightness">Brightness</option>
      <option value="contrast">Contrast</option>
      <option value="sharpness">Sharpness</option>
      <option value="scale">Image Scaling</option>
      <option value="inverse">Inverse Transformation</option>
      <option value="edge_detection">Edge Detection</option>
      <option value="color_correction">Color Correction</option>
      <option value="image_gradients">Image Gradients</option>
      <option value="crop">Image Cropping</option>
      <option value="rotate">Image Rotation</option>
      <option value="blend">Image Blending</option>
      <option value="thresholding">Image Thresholding</option>
      <option value="deblurring">Image Deblurring</option>
      <option value="noise_reduction">Noise Reduction</option>
      </select> -->
      <form method="post">
      {% csrf_token %}
      <label for="enhancement_type">Enter Enhancement Method:</label>
      <input type="text" id="enhancement_type" name="enhancement_type" required>
      <br>
      <label for="factor">Enter Factor (Optional):</label>
      <input type="number" id="factor" name="factor" step="0.1">
      <br>
      <label for="original_image">Original Image:</label>
      <input type="file" name="original_image" id="original_image" accept="image/*" required>
      <br>
      <button type="submit">Enhance Image</button>
  </form>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.querySelector('form');
      form.addEventListener('submit', async function(event) {
          event.preventDefault();
          const formData = new FormData(form);
          const response = await fetch('/chatbot/', {
              method: 'POST',
              body: formData
            });
            const data = await response.json();
            if (data.error) {
              alert(data.error);
            } else {
              const imageElement = document.createElement('img');
              imageElement.src = 'data:image/jpeg;base64,' + data.enhanced_image;
              document.body.appendChild(imageElement);
            }
          });
        });
  </script>

</body>
</html>
